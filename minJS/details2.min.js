require(["config"],function(){require(["jquery","template","header","footer"],function(t,i){t.cookie.json=!0,t(".search .top-l,.bar .top-l").hover(function(){t(this).find("ul").show()},function(){t(this).find("ul").hide()}),t(".search .top-l li,.bar .top-l li").hover(function(){t(this).addClass("active")},function(){t(this).removeClass("active")}),t(".search .top .txt").focus(function(){t(".search .top .history").show()}).blur(function(){t(".search .top .history").hide()}),t(".bar .top .txt").focus(function(){t(".bar .top .history").show()}).blur(function(){t(".bar .top .history").hide()}),t.getJSON("/data/searchHot.json",function(e){var o=i("search-hot",{list:e});t(".wrap .center .bottom").html(o)}),t(window).scrollTop()>0?t("#totop").show():t("#totop").hide(),t(window).scroll(function(){t(window).scrollTop()>0?t("#totop").show():t("#totop").hide(),t(window).scrollTop()>500?t(".bar").show():t(".bar").hide()}),t("#totop").click(function(){t(document.body).animate({scrollTop:0})}),t(".tab .title a").on("click",function(){var i=t(this).index();t(this).addClass("active").siblings().removeClass("active"),t(".show").hide().eq(i).show()}),t(".bigTitle .all,.bigTitle .more").on("mouseover",function(){t(".bigTitle .more").show()}).on("mouseout",function(){t(".bigTitle .more").hide()}),t("#low").on("click",function(){Number(t("#num").val())-1<1?t("#num").val(1):t("#num").val(Number(t("#num").val())-1)}),t("#add").on("click",function(){Number(t("#num").val())+1>192?t("#num").val(192):t("#num").val(Number(t("#num").val())+1)}),t("#num").on("focus",function(){this.prevValue=t(this).val()}),t("#num").on("blur",function(){Number(t(this).val())?(Number(t(this).val())<1||Number(t(this).val())>192)&&t(this).val(this.prevValue):t(this).val(this.prevValue)}),t(".ruler").on("click","a",function(i){t(this).addClass("active").siblings().removeClass("active"),i.preventDefault()}),t(".list").on("click","img",function(){var i=["/img/details/fdj1.jpg","/img/details/fdj2.jpg","/img/details/fdj3.jpg","/img/details/fdj4.jpg","/img/details/details4.jpg"],e=t(this).parent().index();t(".pic img").attr("src",i[e]),t(this).parent().addClass("active").siblings().removeClass("active"),t(".bigpic img").attr("src",i[e])}),t(".pic").on("mousemove",function(i){t(".pic .mask").show(),t(".bigpic").show();var e=i.pageX-t(".pic").offset().left-t(".pic .mask").innerWidth()/2,o=i.pageY-t(".pic").offset().top-t(".pic .mask").innerHeight()/2,n=t(".pic").innerWidth()-t(".pic .mask").innerWidth(),s=t(".pic").innerHeight()-t(".pic .mask").innerHeight(),c=0,r=0;e<0&&(e=0),e>n&&(e=n),o<0&&(o=0),o>s&&(o=s),t(".pic .mask").css({left:e,top:o}),c=e/n,r=o/s,t(".bigpic img").css({left:100*-c,top:200*-r})}),t(".pic").on("mouseout",function(){t(".pic .mask").hide(),t(".bigpic").hide()}),t(".btn a").on("click",function(){var i=t.cookie("products")||[],e={des:t(".rgt p.title").text(),price:[Number(t(".rgt .price .now span").text().slice(1)),Number(t(".rgt .price .old span").text().slice(1))],count:Number(t("#num").val()),ruler:t(".ruler .active").text()||"L",img:t(".list .active img").attr("src")};i.push(e),t.cookie("products",i,{expires:7,path:"/"})}),require(["fly"],function(){t.cookie.json=!0,t(".detail .btn span").on("click",function(i){var e=t.cookie("products")||[],o={des:t(".rgt p.title").text(),price:[Number(t(".rgt .price .now span").text().slice(1)),Number(t(".rgt .price .old span").text().slice(1))],count:Number(t("#num").val()),ruler:t(".ruler .active").text()||"L",img:t(".list .active img").attr("src")};e.push(o),t.cookie("products",e,{expires:7,path:"/"});var n=t(this).parents(".detail").find("li.active img").attr("src"),s=t('<img id="destory" src="'+n+'" style="width:50px;height:50px;border-radius:25px;" />'),c=t(".side a:first img").offset();s.fly({start:{left:i.clientX,top:i.clientY},end:{top:c.top-t(window).scrollTop(),left:c.left-t(window).scrollLeft(),width:10,height:10},onEnd:function(){var i=0;e=t.cookie("products"),t("#destory").remove(),t.each(e,function(t,e){i+=e.count}),t(".side .goodscount").html(i),console.log(e)}})}),function(){var i=t.cookie("products")||[],e=0;t.each(i,function(t,i){e+=i.count}),t(".side .goodscount").html(e)}()})})});