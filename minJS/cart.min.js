require(["config"],function(){require(["jquery","template","cookie","header","footer"],function(o,t){function e(){var t=0,e=0;o(".compute .qfk").removeClass("active"),o(".good1>input:checked").each(function(i,n){var c=Number(o(n).parents(".good1").find(".pri").text()),r=Number(o(n).parents(".good1").find(".num").val());t+=c,e+=r,o(".compute .qfk").addClass("active")}),o(".compute .totalMoney").html(t.toFixed(2)),o(".compute .totalCount").html(e)}o.cookie.json=!0;var i=o.cookie("products")||[];o(window).scrollTop()>0?o("#totop").show():o("#totop").hide(),o(window).scroll(function(){o(window).scrollTop()>0?o("#totop").show():o("#totop").hide(),o(window).scrollTop()>500?o(".bar").show():o(".bar").hide()}),o("#totop").click(function(){o(document.body).animate({scrollTop:0})}),function(){var e=t("shangping",{list:i});o(".content .goods").html(e)}(),o(".good1").on("click",".delate",function(t){var e=o.cookie("products")||[],i=o(".good1").index(o(this).parents(".good1"));e.splice(i,1),o.cookie("products",e,{path:"/"}),o(this).parents(".good1").remove()}),o(".low").on("click",function(){var t=o(this).parents(".good1").find(".pri"),i=Number(o(this).parents(".good1").find(".now").text()),n=o(this).siblings(".num");Number(n.val())-1<1?(n.val(1),t.text(i.toFixed(2))):(n.val(Number(n.val())-1),t.text((i*Number(n.val())).toFixed(2))),e()}),o(".add").on("click",function(){var t=o(this).parents(".good1").find(".pri"),i=Number(o(this).parents(".good1").find(".now").text()),n=o(this).siblings(".num");Number(n.val())+1>192?(n.val(192),t.text((192*i).toFixed(2))):(n.val(Number(n.val())+1),t.text((i*Number(n.val())).toFixed(2))),e()}),o(".num").on("focus",function(){this.prevValue=o(this).val()}),o(".num").on("blur",function(){Number(o(this).val())?(Number(o(this).val())<1||Number(o(this).val())>192)&&o(this).val(this.prevValue):o(this).val(this.prevValue);var t=o(this).parents(".good1").find(".pri"),i=Number(o(this).parents(".good1").find(".now").text());t.text((i*Number(o(this).val())).toFixed(2)),e()}),o(".good1>input").on("click",function(){o(this).prop("checked")?o(this).parents(".good1").addClass("active"):o(this).parents(".good1").removeClass("active"),o(".good1>input").length!=o(".good1>input:checked").length?o("#getall").prop("checked",!1):o("#getall").prop("checked",!0),e()}),o("#getall").on("click",function(){o(this).prop("checked")?(o(".good1>input").prop("checked",!0).parents(".good1").addClass("active"),e()):(o(".good1>input").prop("checked",!1).parents(".good1").removeClass("active"),e())}),o("#delateAll").on("click",function(){o(".good1").find(".delate").trigger("click")}),o(".compute .qfk").on("click",function(){var t=[];o(".good1>input:checked").parents(".good1").each(function(e,i){var n={des:o(i).find(".center a").text(),price:Number(o(i).find(".right .now").text()),count:Number(o(i).find(".right .num").val()),xj:Number(o(i).find(".right .pri").text()),ruler:o(i).find(".right span:first b:last").text()||"L",img:o(i).find(".center img").attr("src")};t.push(n)}),o.cookie("toPay",t,{path:"/"})}),function(){var t=o.cookie("products")||[],e=0;o.each(t,function(o,t){e+=t.count}),o(".side .goodscount").html(e)}()})});